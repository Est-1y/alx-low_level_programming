CC = gcc
SRC = main.c school.c
OBJ = $(SRC:.c=.o)
NAME = school
CFLAGS = -Wall -Werror -Wextra -pedantic

# confirms Makefile works with files that have the same name as rules.
.PHONY: all clean oclean fclean re

# Make all rule, respecting dependencies.
all: $(NAME)

$(NAME): $(OBJ) m.h
	$(CC) $(OBJ) -o $(NAME)

# Clean temporary files and executable.
clean:
	$(RM) *~ $(NAME)

# Clean object files.
oclean:
	$(RM) $(OBJ)

# Clean temporary files, executables, and object files.
fclean:
	$(RM) *~ $(NAME)
	$(RM) $(OBJ)

# Clean and rebuild source files.
re:
	$(MAKE) fclean
	$(MAKE) all

# Compiles object files from source files.
main.o: main.c m.h
	$(CC) -c $(CFLAGS) main.c -o main.o

school.o: school.c m.h
	$(CC) -c $(CFLAGS) school.c -o school.o
