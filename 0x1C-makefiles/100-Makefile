CC = gcc
SRC = main.c school.c
OBJ = $(SRC:.c=.o)
NAME = school
CFLAGS = -Wall -Werror -Wextra -pedantic

# Ensure Makefile works with files that have the same name as rules.
.PHONY: all clean oclean fclean re

# Make all rule, respecting dependencies.
all: $(NAME)

$(NAME): $(OBJ) m.h
	$(CC) $(OBJ) -o $(NAME)

# Clean temporary files and executable.
clean:
	$(RM) *~ $(NAME)

# Clean object files.
oclean:
	$(RM) $(OBJ)

# Clean temporary files, executables, and object files.
fclean: clean oclean

# Clean and rebuild source files.
re: fclean all

# Compile object files from source files.
%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@
